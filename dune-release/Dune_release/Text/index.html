<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Text (dune-release.Dune_release.Text)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../index.html">dune-release</a> &#x00BB; <a href="../index.html">Dune_release</a> &#x00BB; Text</nav><h1>Module <code>Dune_release.Text</code></h1><nav class="toc"><ul><li><a href="#marked-up-text-files">Marked-up text files</a></li><li><a href="#toy-change-log-parsing">Toy change log parsing</a></li></ul></nav></header><aside><p>Text processing helpers.</p></aside><section><header><h2 id="marked-up-text-files"><a href="#marked-up-text-files" class="anchor"></a>Marked-up text files</h2><p><b>Warning.</b> Some of the following functions are not serious and can break on certain valid inputs in all sorts of fashion. To understand breakage bear in mind that they operate line-wise.</p></header><dl><dt class="spec type" id="type-flavour"><a href="#type-flavour" class="anchor"></a><code><span class="keyword">type</span> flavour</code> = <code>[ </code><table class="variant"><tr id="type-flavour.Markdown" class="anchored"><td class="def constructor"><a href="#type-flavour.Markdown" class="anchor"></a><code>| </code><code>`Markdown</code></td></tr><tr id="type-flavour.Asciidoc" class="anchored"><td class="def constructor"><a href="#type-flavour.Asciidoc" class="anchor"></a><code>| </code><code>`Asciidoc</code></td></tr></table><code> ]</code></dt><dd><p>The type for text document formats.</p></dd></dl><dl><dt class="spec value" id="val-flavour_of_fpath"><a href="#val-flavour_of_fpath" class="anchor"></a><code><span class="keyword">val</span> flavour_of_fpath : Fpath.t <span>&#45;&gt;</span> <span><a href="index.html#type-flavour">flavour</a> option</span></code></dt><dd><p><code>flavour_of_fpath p</code> determines a flavour according to the extension of <code>p</code> as follows:</p><ul><li><code>Some `Markdown</code> for <code>.md</code></li><li><code>Some `Asciidoc</code> for <code>.asciidoc</code> or <code>.adoc</code></li><li><code>None</code> otherwise</li></ul></dd></dl><dl><dt class="spec value" id="val-head"><a href="#val-head" class="anchor"></a><code><span class="keyword">val</span> head : <span>?&#8288;flavour:<a href="index.html#type-flavour">flavour</a></span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span>(string * string)</span> option</span></code></dt><dd><p><code>head ~flavour text</code> extracts the <em>head</em> of the document <code>text</code> of flavour <code>flavour</code> (defaults to <code>`Markdown</code>).</p><p>The head is defined as follows:</p><ul><li>Anything before the first header is discarded.</li><li>The first header is kept in the first component</li><li>Everything that follows until the next header of the same or greater level is kept discarding trailing blank lines.</li></ul></dd></dl><dl><dt class="spec value" id="val-header_title"><a href="#val-header_title" class="anchor"></a><code><span class="keyword">val</span> header_title : <span>?&#8288;flavour:<a href="index.html#type-flavour">flavour</a></span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> string</code></dt><dd><p><code>header_title ~flavour text</code> extract the title of a header <code>text</code> of flavour <code>flavour</code> (defaults to <code>`Markdown</code>).</p></dd></dl></section><section><header><h2 id="toy-change-log-parsing"><a href="#toy-change-log-parsing" class="anchor"></a>Toy change log parsing</h2></header><dl><dt class="spec value" id="val-change_log_last_entry"><a href="#val-change_log_last_entry" class="anchor"></a><code><span class="keyword">val</span> change_log_last_entry : <span>?&#8288;flavour:<span>[&lt; `Asciidoc <span>| `Markdown</span> Markdown ]</span></span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span>(string * <span>(string * string)</span>)</span> option</span></code></dt><dd><p><code>change_log_last_entry ?flavour changes</code> tries to parse the last change log entry of the string <code>changes</code> using the <code>flavour</code> syntax.</p></dd></dl><dl><dt class="spec value" id="val-change_log_file_last_entry"><a href="#val-change_log_file_last_entry" class="anchor"></a><code><span class="keyword">val</span> change_log_file_last_entry : Fpath.t <span>&#45;&gt;</span> <span><span>(string * <span>(string * string)</span>, Bos_setup.R.msg)</span> Bos_setup.result</span></code></dt><dd><p><code>change_log_file_last_entry file</code> tries to parse the last change log entry of the file <code>file</code> using <a href="index.html#val-flavour_of_fpath"><code>flavour_of_fpath</code></a> and <a href="index.html#val-change_log_last_entry"><code>change_log_last_entry</code></a>.</p></dd></dl><dl><dt class="spec value" id="val-rewrite_github_refs"><a href="#val-rewrite_github_refs" class="anchor"></a><code><span class="keyword">val</span> rewrite_github_refs : <span>user:string</span> <span>&#45;&gt;</span> <span>repo:string</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> string</code></dt><dd><p><code>rewrite_github_refs ~user ~repo s</code> replaces references like <code>#yyy</code> with <code>user/repo#yyy</code>.</p></dd></dl><dl><dt class="spec module" id="module-Pp"><a href="#module-Pp" class="anchor"></a><code><span class="keyword">module</span> <a href="Pp/index.html">Pp</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Pretty printers.</p></dd></dl></section></div></body></html>